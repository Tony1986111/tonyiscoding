# æ­¥éª¤7ï¼šé¡¹ç›®å±•ç¤ºåŠŸèƒ½

## åˆ›å»ºé¡¹ç›®æ•°æ®ç»“æ„

1. åœ¨ `src/data/projects` ç›®å½•ä¸‹åˆ›å»ºé¡¹ç›®æ•°æ®æ–‡ä»¶ï¼š
   ```bash
   mkdir -p src/data/projects
   ```

2. åˆ›å»º `src/data/projects/index.js` æ–‡ä»¶ï¼Œç”¨äºå¯¼å‡ºæ‰€æœ‰é¡¹ç›®æ•°æ®ï¼š
   ```javascript
   import fs from 'fs';
   import path from 'path';
   import matter from 'gray-matter';

   const projectsDirectory = path.join(process.cwd(), 'src/data/projects');

   export function getSortedProjectsData() {
     // è·å– /projects ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å
     const fileNames = fs.readdirSync(projectsDirectory).filter(fileName => 
       fileName.endsWith('.md') || fileName.endsWith('.mdx')
     );
     
     const allProjectsData = fileNames.map((fileName) => {
       // ç§»é™¤æ–‡ä»¶åä¸­çš„æ‰©å±•åä»¥è·å– id
       const id = fileName.replace(/\.(md|mdx)$/, '');

       // å°† markdown æ–‡ä»¶è¯»å–ä¸ºå­—ç¬¦ä¸²
       const fullPath = path.join(projectsDirectory, fileName);
       const fileContents = fs.readFileSync(fullPath, 'utf8');

       // ä½¿ç”¨ gray-matter è§£æ markdown æ–‡ä»¶çš„å…ƒæ•°æ®éƒ¨åˆ†
       const matterResult = matter(fileContents);

       // å°†æ•°æ®ä¸ id ç»„åˆ
       return {
         id,
         ...matterResult.data,
       };
     });

     // æŒ‰æ—¥æœŸæ’åºï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰
     return allProjectsData.sort((a, b) => {
       if (a.date < b.date) {
         return 1;
       } else {
         return -1;
       }
     });
   }

   export function getAllProjectIds() {
     const fileNames = fs.readdirSync(projectsDirectory).filter(fileName => 
       fileName.endsWith('.md') || fileName.endsWith('.mdx')
     );
     
     return fileNames.map((fileName) => {
       return {
         params: {
           id: fileName.replace(/\.(md|mdx)$/, ''),
         },
       };
     });
   }

   export async function getProjectData(id) {
     let fullPath = path.join(projectsDirectory, `${id}.md`);
     
     // æ£€æŸ¥ .md æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™å°è¯• .mdx
     if (!fs.existsSync(fullPath)) {
       fullPath = path.join(projectsDirectory, `${id}.mdx`);
     }
     
     const fileContents = fs.readFileSync(fullPath, 'utf8');

     // ä½¿ç”¨ gray-matter è§£æ markdown æ–‡ä»¶çš„å…ƒæ•°æ®éƒ¨åˆ†
     const matterResult = matter(fileContents);

     // å°†æ•°æ®ä¸ id å’Œå†…å®¹ç»„åˆ
     return {
       id,
       content: matterResult.content,
       ...matterResult.data,
     };
   }

   export function getFeaturedProjects() {
     const allProjects = getSortedProjectsData();
     return allProjects.filter(project => project.featured);
   }
   ```

3. åˆ›å»ºä¸€ä¸ªç¤ºä¾‹é¡¹ç›®æ–‡ä»¶ `src/data/projects/personal-website.md`ï¼š
   ```markdown
   ---
   title: 'ä¸ªäººç½‘ç«™'
   date: '2024-06-01'
   description: 'ä½¿ç”¨Next.jså’ŒReactæ„å»ºçš„ä¸ªäººç½‘ç«™ï¼Œå±•ç¤ºæˆ‘çš„é¡¹ç›®å’Œåšå®¢ã€‚'
   emoji: 'ğŸŒ'
   status: 'è¿›è¡Œä¸­'
   tags: ['Next.js', 'React', 'Tailwind CSS']
   featured: true
   github: 'https://github.com/ä½ çš„ç”¨æˆ·å/personal-website'
   demo: 'https://ä½ çš„åŸŸå.com'
   ---

   # ä¸ªäººç½‘ç«™é¡¹ç›®

   è¿™æ˜¯æˆ‘ä½¿ç”¨Next.jså’ŒReactæ„å»ºçš„ä¸ªäººç½‘ç«™ï¼Œç”¨äºå±•ç¤ºæˆ‘çš„é¡¹ç›®å’Œåšå®¢ã€‚

   ## æŠ€æœ¯æ ˆ

   - Next.js
   - React
   - Tailwind CSS
   - Markdown

   ## åŠŸèƒ½ç‰¹ç‚¹

   - å“åº”å¼è®¾è®¡
   - æš—é»‘æ¨¡å¼
   - åšå®¢ç³»ç»Ÿ
   - é¡¹ç›®å±•ç¤º
   - è”ç³»è¡¨å•

   ## å¼€å‘è¿‡ç¨‹

   è¿™ä¸ªç½‘ç«™çš„å¼€å‘è¿‡ç¨‹æ˜¯æˆ‘å­¦ä¹ Reactå’ŒNext.jsçš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ã€‚æˆ‘ä»è®¾è®¡å¼€å§‹ï¼Œç„¶åé€æ­¥å®ç°å„ä¸ªåŠŸèƒ½...

   ## é‡åˆ°çš„æŒ‘æˆ˜

   åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›æŒ‘æˆ˜ï¼Œä¾‹å¦‚...

   ## å­¦åˆ°çš„ç»éªŒ

   é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘å­¦åˆ°äº†...
   ```

## åˆ›å»ºé¡¹ç›®åˆ—è¡¨é¡µé¢

1. æ›´æ–° `src/app/projects/page.js` ä»¥ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿä¸­çš„é¡¹ç›®æ•°æ®ï¼š
   ```jsx
   import Navbar from '@/components/Navbar';
   import Footer from '@/components/Footer';
   import ProjectCard from '@/components/ProjectCard';
   import PageTransition from '@/components/PageTransition';
   
   import { getSortedProjectsData } from '@/data/projects';
   import { getPersonalInfo } from '@/data/personal';
   
   export default function Projects() {
     const projects = getSortedProjectsData();
     const personalInfo = getPersonalInfo();
     
     return (
       <div className="min-h-screen flex flex-col">
         <Navbar />
         <PageTransition>
           <main className="flex-grow max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
             <h1 className="text-3xl font-bold mb-8">æˆ‘çš„é¡¹ç›®</h1>
             
             {projects.length === 0 ? (
               <p>æš‚æ— é¡¹ç›®</p>
             ) : (
               <div className="grid md:grid-cols-2 gap-8">
                 {projects.map((project) => (
                   <ProjectCard key={project.id} project={{
                     ...project,
                     link: `/projects/${project.id}`
                   }} />
                 ))}
               </div>
             )}
           </main>
         </PageTransition>
         <Footer personalInfo={personalInfo} />
       </div>
     );
   }
   ```

## åˆ›å»ºé¡¹ç›®è¯¦æƒ…é¡µé¢

1. åˆ›å»º `src/app/projects/[id]/page.js` æ–‡ä»¶ï¼š
   ```jsx
   import Navbar from '@/components/Navbar';
   import Footer from '@/components/Footer';
   import PageTransition from '@/components/PageTransition';
   import { Github, ExternalLink } from 'lucide-react';
   
   import { getAllProjectIds, getProjectData } from '@/data/projects';
   import { getPersonalInfo } from '@/data/personal';
   import { formatDate } from '@/lib/utils';
   import { markdownToHtml } from '@/lib/markdown';
   
   // ç”Ÿæˆé™æ€è·¯å¾„
   export async function generateStaticParams() {
     const paths = getAllProjectIds();
     return paths;
   }
   
   export default async function Project({ params }) {
     const { id } = params;
     const projectData = await getProjectData(id);
     const personalInfo = getPersonalInfo();
     
     // å°†Markdownè½¬æ¢ä¸ºHTML
     const contentHtml = await markdownToHtml(projectData.content);
     
     return (
       <div className="min-h-screen flex flex-col">
         <Navbar />
         <PageTransition>
           <main className="flex-grow max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
             <article>
               <header className="mb-8">
                 <div className="flex flex-wrap gap-2 mb-4">
                   {projectData.tags && projectData.tags.map((tag) => (
                     <span key={tag} className="px-2 py-1 text-xs rounded bg-gray-100 dark:bg-gray-800">
                       {tag}
                     </span>
                   ))}
                 </div>
                 
                 <div className="flex items-center mb-4">
                   <span className="text-5xl mr-4">{projectData.emoji}</span>
                   <h1 className="text-4xl font-bold">{projectData.title}</h1>
                 </div>
                 
                 <div className="flex flex-wrap items-center gap-4 mb-4">
                   <div className="px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100">
                     {projectData.status}
                   </div>
                   <div className="text-gray-500 dark:text-gray-400">
                     {formatDate(projectData.date)}
                   </div>
                 </div>
                 
                 <p className="text-xl text-gray-600 dark:text-gray-300 mb-6">
                   {projectData.description}
                 </p>
                 
                 <div className="flex flex-wrap gap-4">
                   {projectData.github && (
                     <a 
                       href={projectData.github} 
                       target="_blank" 
                       rel="noopener noreferrer"
                       className="flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-white transition"
                     >
                       <Github size={18} />
                       <span>æŸ¥çœ‹æºç </span>
                     </a>
                   )}
                   
                   {projectData.demo && (
                     <a 
                       href={projectData.demo} 
                       target="_blank" 
                       rel="noopener noreferrer"
                       className="flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-500 hover:bg-blue-600 text-white transition"
                     >
                       <ExternalLink size={18} />
                       <span>æŸ¥çœ‹æ¼”ç¤º</span>
                     </a>
                   )}
                 </div>
               </header>
               
               <div className="prose dark:prose-invert max-w-none">
                 <div dangerouslySetInnerHTML={{ __html: contentHtml }} />
               </div>
             </article>
           </main>
         </PageTransition>
         <Footer personalInfo={personalInfo} />
       </div>
     );
   }
   ```

## åˆ›å»ºé¡¹ç›®ç­›é€‰åŠŸèƒ½

1. åˆ›å»º `src/components/ProjectFilter.jsx` ç»„ä»¶ï¼š
   ```jsx
   'use client';
   
   export default function ProjectFilter({ tags, statuses, selectedTag, selectedStatus, onSelectTag, onSelectStatus }) {
     return (
       <div className="mb-8">
         <div className="mb-4">
           <h3 className="text-lg font-medium mb-2">æŠ€æœ¯æ ‡ç­¾</h3>
           <div className="flex flex-wrap gap-2">
             <button
               onClick={() => onSelectTag(null)}
               className={`px-3 py-1 rounded-full text-sm ${
                 selectedTag === null
                   ? 'bg-blue-500 text-white'
                   : 'bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200'
               }`}
             >
               å…¨éƒ¨
             </button>
             {tags.map((tag) => (
               <button
                 key={tag}
                 onClick={() => onSelectTag(tag)}
                 className={`px-3 py-1 rounded-full text-sm ${
                   selectedTag === tag
                     ? 'bg-blue-500 text-white'
                     : 'bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200'
                 }`}
               >
                 {tag}
               </button>
             ))}
           </div>
         </div>
         
         <div>
           <h3 className="text-lg font-medium mb-2">é¡¹ç›®çŠ¶æ€</h3>
           <div className="flex flex-wrap gap-2">
             <button
               onClick={() => onSelectStatus(null)}
               className={`px-3 py-1 rounded-full text-sm ${
                 selectedStatus === null
                   ? 'bg-blue-500 text-white'
                   : 'bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200'
               }`}
             >
               å…¨éƒ¨
             </button>
             {statuses.map((status) => (
               <button
                 key={status}
                 onClick={() => onSelectStatus(status)}
                 className={`px-3 py-1 rounded-full text-sm ${
                   selectedStatus === status
                     ? 'bg-blue-500 text-white'
                     : 'bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200'
                 }`}
               >
                 {status}
               </button>
             ))}
           </div>
         </div>
       </div>
     );
   }
   ```

2. æ›´æ–° `src/app/projects/page.js` ä»¥æ·»åŠ ç­›é€‰åŠŸèƒ½ï¼š
   ```jsx
   'use client';
   
   import { useState, useEffect } from 'react';
   import Navbar from '@/components/Navbar';
   import Footer from '@/components/Footer';
   import ProjectCard from '@/components/ProjectCard';
   import ProjectFilter from '@/components/ProjectFilter';
   import PageTransition from '@/components/PageTransition';
   
   export default function Projects() {
     const [projects, setProjects] = useState([]);
     const [filteredProjects, setFilteredProjects] = useState([]);
     const [selectedTag, setSelectedTag] = useState(null);
     const [selectedStatus, setSelectedStatus] = useState(null);
     const [allTags, setAllTags] = useState([]);
     const [allStatuses, setAllStatuses] = useState([]);
     const [loading, setLoading] = useState(true);
     
     // è·å–æ‰€æœ‰é¡¹ç›®
     useEffect(() => {
       async function fetchProjects() {
         try {
           const response = await fetch('/api/projects');
           const data = await response.json();
           setProjects(data);
           setFilteredProjects(data);
           
           // æå–æ‰€æœ‰å”¯ä¸€æ ‡ç­¾
           const tags = new Set();
           const statuses = new Set();
           
           data.forEach(project => {
             if (project.tags) {
               project.tags.forEach(tag => tags.add(tag));
             }
             if (project.status) {
               statuses.add(project.status);
             }
           });
           
           setAllTags(Array.from(tags));
           setAllStatuses(Array.from(statuses));
           
           setLoading(false);
         } catch (error) {
           console.error('è·å–é¡¹ç›®å¤±è´¥:', error);
           setLoading(false);
         }
       }
       
       fetchProjects();
     }, []);
     
     // å¤„ç†æ ‡ç­¾ç­›é€‰
     const handleTagSelect = (tag) => {
       setSelectedTag(tag);
       filterProjects(tag, selectedStatus);
     };
     
     // å¤„ç†çŠ¶æ€ç­›é€‰
     const handleStatusSelect = (status) => {
       setSelectedStatus(status);
       filterProjects(selectedTag, status);
     };
     
     // ç­›é€‰é¡¹ç›®
     const filterProjects = (tag, status) => {
       let filtered = projects;
       
       // æŒ‰æ ‡ç­¾ç­›é€‰
       if (tag) {
         filtered = filtered.filter(project => 
           project.tags && project.tags.includes(tag)
         );
       }
       
       // æŒ‰çŠ¶æ€ç­›é€‰
       if (status) {
         filtered = filtered.filter(project => 
           project.status === status
         );
       }
       
       setFilteredProjects(filtered);
     };
     
     return (
       <div className="min-h-screen flex flex-col">
         <Navbar />
         <PageTransition>
           <main className="flex-grow max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
             <h1 className="text-3xl font-bold mb-8">æˆ‘çš„é¡¹ç›®</h1>
             
             <div className="md:flex md:gap-8">
               <div className="md:w-1/4 mb-8 md:mb-0">
                 <ProjectFilter 
                   tags={allTags} 
                   statuses={allStatuses}
                   selectedTag={selectedTag} 
                   selectedStatus={selectedStatus}
                   onSelectTag={handleTagSelect} 
                   onSelectStatus={handleStatusSelect}
                 />
               </div>
               
               <div className="md:w-3/4">
                 {loading ? (
                   <p>åŠ è½½ä¸­...</p>
                 ) : filteredProjects.length === 0 ? (
                   <p>æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ¡ä»¶çš„é¡¹ç›®</p>
                 ) : (
                   <div className="grid md:grid-cols-2 gap-8">
                     {filteredProjects.map((project) => (
                       <ProjectCard key={project.id} project={{
                         ...project,
                         link: `/projects/${project.id}`
                       }} />
                     ))}
                   </div>
                 )}
               </div>
             </div>
           </main>
         </PageTransition>
         <Footer />
       </div>
     );
   }
   ```

3. åˆ›å»º API è·¯ç”±ä»¥è·å–é¡¹ç›®æ•°æ®ã€‚åˆ›å»º `src/app/api/projects/route.js` æ–‡ä»¶ï¼š
   ```javascript
   import { getSortedProjectsData } from '@/data/projects';
   import { NextResponse } from 'next/server';
   
   export async function GET() {
     const projects = getSortedProjectsData();
     return NextResponse.json(projects);
   }
   ```

## æ·»åŠ é¡¹ç›®æˆªå›¾å±•ç¤º

1. åˆ›å»º `src/components/ImageGallery.jsx` ç»„ä»¶ï¼š
   ```jsx
   'use client';
   
   import { useState } from 'react';
   import Image from 'next/image';
   import { X } from 'lucide-react';
   
   export default function ImageGallery({ images }) {
     const [selectedImage, setSelectedImage] = useState(null);
     
     const openImage = (index) => {
       setSelectedImage(index);
     };
     
     const closeImage = () => {
       setSelectedImage(null);
     };
     
     const nextImage = () => {
       setSelectedImage((prev) => (prev + 1) % images.length);
     };
     
     const prevImage = () => {
       setSelectedImage((prev) => (prev - 1 + images.length) % images.length);
     };
     
     return (
       <div className="my-8">
         <div className="grid grid-cols-2 md:grid-cols-3 gap-4">
           {images.map((image, index) => (
             <div 
               key={index} 
               className="relative aspect-video cursor-pointer overflow-hidden rounded-lg"
               onClick={() => openImage(index)}
             >
               <Image
                 src={image.src}
                 alt={image.alt || `é¡¹ç›®æˆªå›¾ ${index + 1}`}
                 width={400}
                 height={225}
                 className="object-cover w-full h-full transition-transform hover:scale-105"
               />
             </div>
           ))}
         </div>
         
         {selectedImage !== null && (
           <div className="fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4">
             <button 
               className="absolute top-4 right-4 text-white p-2 rounded-full bg-gray-800 hover:bg-gray-700"
               onClick={closeImage}
             >
               <X size={24} />
             </button>
             
             <div className="relative max-w-4xl max-h-[80vh]">
               <Image
                 src={images[selectedImage].src}
                 alt={images[selectedImage].alt || `é¡¹ç›®æˆªå›¾ ${selectedImage + 1}`}
                 width={1200}
                 height={675}
                 className="object-contain max-h-[80vh]"
               />
               
               {images[selectedImage].caption && (
                 <div className="text-white text-center mt-2">
                   {images[selectedImage].caption}
                 </div>
               )}
               
               <div className="absolute inset-y-0 left-0 flex items-center">
                 <button 
                   className="bg-gray-800 hover:bg-gray-700 text-white p-2 rounded-full"
                   onClick={prevImage}
                 >
                   &lt;
                 </button>
               </div>
               
               <div className="absolute inset-y-0 right-0 flex items-center">
                 <button 
                   className="bg-gray-800 hover:bg-gray-700 text-white p-2 rounded-full"
                   onClick={nextImage}
                 >
                   &gt;
                 </button>
               </div>
             </div>
           </div>
         )}
       </div>
     );
   }
   ```

2. æ›´æ–°é¡¹ç›®è¯¦æƒ…é¡µä»¥åŒ…å«å›¾ç‰‡åº“ï¼š
   ```jsx
   import ImageGallery from '@/components/ImageGallery';
   
   export default async function Project({ params }) {
     // ...
     
     // é¡¹ç›®æˆªå›¾ï¼ˆè¿™äº›å¯ä»¥ä»é¡¹ç›®æ•°æ®ä¸­è·å–ï¼Œæˆ–è€…ä»ç‰¹å®šç›®å½•ä¸­è¯»å–ï¼‰
     const projectImages = projectData.images || [
       {
         src: '/images/projects/default.jpg',
         alt: 'é¡¹ç›®æˆªå›¾',
         caption: 'é¡¹ç›®é»˜è®¤æˆªå›¾'
       }
     ];
     
     return (
       <div className="min-h-screen flex flex-col">
         <Navbar />
         <PageTransition>
           <main className="flex-grow max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
             <article>
               {/* ... */}
               
               {projectImages.length > 0 && (
                 <div className="my-8">
                   <h2 className="text-2xl font-bold mb-4">é¡¹ç›®æˆªå›¾</h2>
                   <ImageGallery images={projectImages} />
                 </div>
               )}
               
               <div className="prose dark:prose-invert max-w-none">
                 <div dangerouslySetInnerHTML={{ __html: contentHtml }} />
               </div>
             </article>
           </main>
         </PageTransition>
         <Footer personalInfo={personalInfo} />
       </div>
     );
   }
   ```

å®Œæˆè¿™äº›æ­¥éª¤åï¼Œä½ å°†æ‹¥æœ‰ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„é¡¹ç›®å±•ç¤ºç³»ç»Ÿï¼ŒåŒ…æ‹¬é¡¹ç›®åˆ—è¡¨ã€è¯¦æƒ…é¡µã€ç­›é€‰åŠŸèƒ½å’Œå›¾ç‰‡å±•ç¤ºã€‚
